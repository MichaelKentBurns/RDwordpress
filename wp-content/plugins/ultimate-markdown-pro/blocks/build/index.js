!function(){"use strict";var t=window.wp.element;function e(t,e){const{dispatch:o,select:a}=wp.data;wp.data.dispatch("core/block-editor").insertBlocks(t),wp.data.dispatch("core/block-editor").clearSelectedBlock(),wp.data.dispatch("core/edit-post").openGeneralSidebar("edit-post/document"),null!==e.thumbnail&&function(t){const e=wp.data.select("core/editor").getCurrentPost(),o=Object.assign({},e,{featured_media:t});wp.data.dispatch("core/editor").editPost(o)}(e.thumbnail),null!==e.title&&wp.data.dispatch("core/editor").editPost({title:e.title}),null!==e.excerpt&&wp.data.dispatch("core/editor").editPost({excerpt:e.excerpt}),null!==e.categories&&o("core/editor").editPost({categories:e.categories}),null!==e.tags&&o("core/editor").editPost({tags:e.tags}),null!==e.author&&wp.data.dispatch("core/editor").editPost({author:e.author}),null!==e.date&&wp.data.dispatch("core/editor").editPost({date:e.date}),null!==e.status&&wp.data.dispatch("core/editor").editPost({status:e.status}),null!==e.slug&&wp.data.dispatch("core/editor").editPost({slug:e.slug})}const{PluginDocumentSettingPanel:o}=wp.editor,{Component:a}=wp.element,{__:__}=wp.i18n,{FormFileUpload:r}=wp.components,{registerPlugin:n}=wp.plugins;n("daextulmap-import-document",{icon:!1,render:class extends a{render(){return(0,t.createElement)(o,{name:"daextulmap-import-document",title:__("Import Markdown","ultimate-markdown-pro")},(0,t.createElement)(r,{className:"block-library-gallery-add-item-button",onChange:()=>{const t=event.target.files[0],o=new FormData;o.append("action","daextulmap_import_document"),o.append("security",window.DAEXTULMAP_PARAMETERS.nonce),o.append("uploaded_file",t),fetch(window.DAEXTULMAP_PARAMETERS.ajaxUrl,{method:"POST",body:o}).then((function(t){return t.json()})).then((function(t){const o={invalid_date_format:__("Invalid date format in Front Matter. Please enter a valid date, e.g. 2025-07-16, or a date and time, e.g. 2025-07-16 10:30:42.","ultimate-markdown-pro"),generic_error:__("Please review your document for any formatting issues in the Front Matter or Markdown content, then try again. The content could not be processed. For more details on supported fields and formatting, please refer to the plugin documentation.","ultimate-markdown-pro")},a=o[t.data.error]||o.generic_error;if(t.data.error)return void wp.data.dispatch("core/notices").createErrorNotice(a,{type:"snackbar",isDismissible:!0});let r="";r="marked"===window.DAEXTULMAP_PARAMETERS.editorMarkdownParser?marked(t.data.content):t.data.html_content,r=DOMPurify.sanitize(r,{USE_PROFILES:{html:!0}}),wp.data.dispatch("core/block-editor").resetBlocks([]),e(wp.blocks.rawHandler({HTML:r}),t.data),wp.data.dispatch("core/notices").createErrorNotice(__("Markdown content successfully processed and blocks created.","ultimate-markdown-pro"),{type:"snackbar",isDismissible:!0})}))},accept:".md,.markdown,.mdown,.mkdn,.mkd,.mdwn,.mdtxt,.mdtext,.text,.txt",icon:"insert",__next40pxDefaultSize:!0},__("Upload file and import","ultimate-markdown-pro")))}}});const{dispatch:d,select:i}=wp.data,{PluginDocumentSettingPanel:s}=wp.editor,{Component:c}=wp.element,{__:l}=wp.i18n,{Button:m,SelectControl:p}=wp.components,{registerPlugin:u}=wp.plugins;u("daextulmap-load-document",{icon:!1,render:class extends c{constructor(t){super(...arguments),this.state={documentIdSelectorValue:""}}render(){const o=i("core/editor").getEditedPostAttribute("meta")._import_markdown_pro_load_document_selector;return(0,t.createElement)(s,{name:"daextulmap-load-document",title:l("Load Markdown","ultimate-markdown-pro"),className:"daextulmap-load-document-panel"},(0,t.createElement)(p,{label:l("Markdown document","ultimate-markdown-pro"),help:l("Select a Markdown document, then click the submit document button to generate the corresponding blocks.","ultimate-markdown-pro"),value:o,onChange:t=>{d("core/editor").editPost({meta:{_import_markdown_pro_load_document_selector:t}}),this.setState({documentIdSelectorValue:t})},options:window.DAEXTULMAP_PARAMETERS.documents,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,t.createElement)(m,{variant:"secondary",className:"editor-post-trash is-destructive",onClick:()=>{const t=i("core/editor").getEditedPostAttribute("meta")._import_markdown_pro_load_document_selector;if(0===parseInt(t,10))return;const o=new FormData;o.append("action","daextulmap_load_document"),o.append("security",window.DAEXTULMAP_PARAMETERS.nonce),o.append("document_id",t),fetch(window.DAEXTULMAP_PARAMETERS.ajaxUrl,{method:"POST",body:o}).then((t=>t.json())).then((t=>{const o={invalid_date_format:l("Invalid date format in Front Matter. Please enter a valid date, e.g. 2025-07-16, or a date and time, e.g. 2025-07-16 10:30:42.","ultimate-markdown-pro"),generic_error:l("Please review your document for any formatting issues in the Front Matter or Markdown content, then try again. The content could not be processed. For more details on supported fields and formatting, please refer to the plugin documentation.","ultimate-markdown-pro")},a=o[t.data.error]||o.generic_error;if(t.data.error)return void wp.data.dispatch("core/notices").createErrorNotice(a,{type:"snackbar",isDismissible:!0});let r="";r="marked"===window.DAEXTULMAP_PARAMETERS.editorMarkdownParser?marked(t.data.content):t.data.html_content,r=DOMPurify.sanitize(r,{USE_PROFILES:{html:!0}}),wp.data.dispatch("core/block-editor").resetBlocks([]),e(wp.blocks.rawHandler({HTML:r}),t.data),d("core/editor").editPost({meta:{_import_markdown_pro_load_document_selector:"0"}}),this.setState({documentIdSelectorValue:"0"}),wp.data.dispatch("core/notices").createErrorNotice(l("Markdown content successfully processed and blocks created.","ultimate-markdown-pro"),{type:"snackbar",isDismissible:!0})}))}},l("Submit document","ultimate-markdown-pro")))}}});const{Button:w,TextareaControl:_}=wp.components,{dispatch:k,select:h}=wp.data,{PluginDocumentSettingPanel:g}=wp.editor,{Component:P}=wp.element,{__:b}=wp.i18n,{registerPlugin:E}=wp.plugins;E("submit-text",{icon:!1,render:class extends P{constructor(t){super(...arguments),this.state={textareaValue:""}}render(){const o=h("core/editor").getEditedPostAttribute("meta")._import_markdown_pro_submit_text_textarea;return(0,t.createElement)(g,{name:"submit-text",title:b("Submit Markdown","ultimate-markdown-pro"),className:"daextulmap-submit-text-panel"},(0,t.createElement)(_,{label:b("Markdown text","ultimate-markdown-pro"),help:b("Enter the Markdown text, then click the submit text button to generate the corresponding blocks.","ultimate-markdown-pro"),value:o,onChange:t=>{k("core/editor").editPost({meta:{_import_markdown_pro_submit_text_textarea:t}}),this.setState({textareaValue:t})},__nextHasNoMarginBottom:!0}),(0,t.createElement)(w,{variant:"secondary",className:"editor-post-trash is-destructive",onClick:()=>{wp.ajax.post("daextulmap_submit_markdown",{security:window.DAEXTULMAP_PARAMETERS.nonce,markdowntext:this.state.textareaValue}).done((t=>{let o="";o="marked"===window.DAEXTULMAP_PARAMETERS.editorMarkdownParser?marked(t.content):t.html_content,o=DOMPurify.sanitize(o,{USE_PROFILES:{html:!0}}),wp.data.dispatch("core/block-editor").resetBlocks([]),e(wp.blocks.rawHandler({HTML:o}),t),k("core/editor").editPost({meta:{_import_markdown_pro_submit_text_textarea:""}}),this.setState({textareaValue:""}),wp.data.dispatch("core/notices").createErrorNotice(b("Markdown content successfully processed and blocks created.","ultimate-markdown-pro"),{type:"snackbar",isDismissible:!0})})).fail((t=>{const e={invalid_date_format:b("Invalid date format in Front Matter. Please enter a valid date, e.g. 2025-07-16, or a date and time, e.g. 2025-07-16 10:30:42.","ultimate-markdown-pro"),generic_error:b("Please review your document for any formatting issues in the Front Matter or Markdown content, then try again. The content could not be processed. For more details on supported fields and formatting, please refer to the plugin documentation.","ultimate-markdown-pro")},o=e[t.error]||e.generic_error;wp.data.dispatch("core/notices").createErrorNotice(o,{type:"snackbar",isDismissible:!0})}))}},b("Submit text","ultimate-markdown-pro")))}}});const{Button:x}=wp.components,{select:M}=wp.data,{PluginDocumentSettingPanel:f}=wp.editor,{Component:A}=wp.element,{__:S}=wp.i18n,{registerPlugin:y}=wp.plugins;y("export-markdown",{icon:!1,render:class extends A{render(){const e=M("core/editor").getCurrentPostId();return(0,t.createElement)(f,{name:"export-markdown",title:S("Export Markdown","ultimate-markdown-pro")},(0,t.createElement)(x,{variant:"secondary",onClick:()=>{wp.apiFetch({path:"/ultimate-markdown-pro/v1/export-post",method:"POST",data:{post_id:e}}).then((t=>{((t,e,o)=>{const a=t,r=window.URL.createObjectURL(new Blob([a])),n=document.createElement("a");n.href=r;const d="post-"+o+"."+e;n.setAttribute("download",d),document.body.appendChild(n),n.click(),n.parentNode.removeChild(n)})(t.content,window.DAEXTULMAP_PARAMETERS.exportedFilesExtension,e),wp.data.dispatch("core/notices").createErrorNotice(S("Post content successfully processed and Markdown file saved.","ultimate-markdown-pro"),{type:"snackbar",isDismissible:!0})}))}},S("Export","ultimate-markdown-pro")))}}})}();